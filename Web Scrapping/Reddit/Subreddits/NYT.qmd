```{r}
library(httr)
library(jsonlite)


api_key <- "WitNU2gMjn4URLzQTRgOxjVN0kWXZCAK"


keywords <- c('electric car', 'electric vehicle', 'ev', 'motor', 
              'car', 'battery', 'autonomous', 'tesla')

search_articles <- function(keyword, api_key) {
  base_url <- "https://api.nytimes.com/svc/search/v2/articlesearch.json"
  
  query <- list(
    q = keyword,
    "api-key" = api_key
  )
  
  response <- GET(base_url, query = query)
  
  if (status_code(response) == 200) {
    content <- fromJSON(content(response, "text"), flatten = TRUE)
    return(content$response$docs)
  } else {
    warning(paste("Error for keyword:", keyword, "- Status code:", status_code(response)))
    return(NULL)
  }
}

results <- list()

for (keyword in keywords) {
  articles <- search_articles(keyword, api_key)
  if (!is.null(articles)) {
    results[[keyword]] <- articles
  }
  Sys.sleep(6)
}


for (keyword in names(results)) {
  cat("\nKeyword:", keyword, "\n")
  cat("Number of articles found:", nrow(results[[keyword]]), "\n")
  
  if (nrow(results[[keyword]]) > 0) {
    cat("First article headline:", results[[keyword]]$headline.main[1], "\n")
    cat("First article snippet:", results[[keyword]]$snippet[1], "\n")
  }
}
```